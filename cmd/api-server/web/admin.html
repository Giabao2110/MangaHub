<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard - MangaHub</title>
    <style>
      body {
        font-family: sans-serif;
        background: #0b0c2a;
        color: white;
        padding: 20px;
      }
      .msg-card {
        background: #161b40;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
        border-left: 4px solid #ff0055;
      }
      .user {
        font-weight: bold;
        color: #ff0055;
      }
      .time {
        font-size: 0.8em;
        color: #aaa;
      }
      .content {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Admin Dashboard - Tin nhắn từ người dùng</h1>
    <button onclick="location.href='/'" style="padding: 10px; cursor: pointer">
      ← Quay lại Trang chủ
    </button>
    <div id="message-list" style="margin-top: 20px">Đang tải tin nhắn...</div>

    <script>
      async function loadMessages() {
        const res = await fetch("/api/admin/messages");
        const data = await res.json();
        const container = document.getElementById("message-list");

        if (!data || data.length === 0) {
          container.innerHTML = "Chưa có tin nhắn nào.";
          return;
        }

        container.innerHTML = data
          .map(
            (m) => `
                <div class="msg-card">
                    <div class="user">Người gửi: ${m.username}</div>
                    <div class="time">Gửi lúc: ${new Date(
                      m.created_at
                    ).toLocaleString()}</div>
                    <div class="content">${m.content}</div>
                </div>
            `
          )
          .join("");
      }
      loadMessages();
    </script>
  </body>
</html>
